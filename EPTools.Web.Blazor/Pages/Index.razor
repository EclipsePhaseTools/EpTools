@page "/"
@inject EPTools.Common.Services.DiscordWebhookService dsw
@inject EPTools.Common.Services.EPDataService epd

<button @onclick="@(async () => await Post())">Post</button>
<ul>
    @foreach (var item in list)
    {
        <li>@item.Name @item.Weight</li>
    }
</ul>


@code{
    private List<EPTools.Common.Models.DTO.LifepathNativeTongue> list = new List<Common.Models.DTO.LifepathNativeTongue>();

    protected override async Task OnInitializedAsync()
    {
        foreach (var lifepath in await epd.GetLifepathNativeTonguesAsync())
        {
            list.Add(lifepath);
            this.StateHasChanged();
        }
    }

    private async Task Post()
    {
        await dsw.SendWebhook();
    }
}